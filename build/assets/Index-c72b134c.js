import{_ as L}from"./AuthenticatedLayout-22fd5482.js";import{D as N}from"./DangerButton-5dded5e3.js";import{_ as j,T as I,Z as z,n as O,r as A,a as n,o as l,c,b as i,w as p,d as e,e as v,F as x,f as S,t as d,j as w,g as C,k as F,v as W,p as H,h as q}from"./app-b847fc4e.js";import{S as V}from"./sweetalert2.all-e938a770.js";import{M as G}from"./MainNav-e236d4a5.js";import{_ as R,a as Z,b as J}from"./TextInput-efc03dea.js";import{P as K}from"./PrimaryButton-7b8a4adb.js";import{_ as Q}from"./SelectInput-115ca0f1.js";import{W as X}from"./WarningButton-7e72505f.js";import{_ as Y,a as $}from"./Modal-4239b41b.js";import"./ApplicationLogo-17150bae.js";import"./ResponsiveNavLink-9de50868.js";import"./NavLink-61b1fc92.js";import"./chevron-down-5630ab5c.js";const ee={data(){return{form:I({class_category_id:"",category_id:"",subcategory_id:"",name:"",price:"",images:[],description:""}),formPage:I({}),nameInput:null,descriptonInput:null,cantidadInput:null,modal:!1,title:"",operation:1,id_value:"",filteredSubCat:[],filteredCat:[],product_id:void 0,perPage:8,currentPage:1,number_pages:void 0,saving:!1}},props:{products:{type:Object},subcategories:{type:Object},categories:{type:Object},class_categories:{type:Object}},created(){this.number_pages=Math.ceil(this.products.length/this.perPage)},methods:{prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.number_pages&&this.currentPage++},goToPageNumber(o){o>=1&&o<=this.number_pages&&(setTimeout(()=>{this.scrollToTop()},100),this.currentPage=o)},scrollToTop(){window.scrollTo(0,0)},filterCategories(){const o=this.form.class_category_id;this.form.subcategory_id&&(this.form.subcategory_id=""),this.filteredCat=this.categories.filter(t=>t.class_category_id==o)},filterSubcategories(){const o=this.form.category_id;this.filteredSubCat=this.subcategories.filter(t=>t.category_id==o),this.form.subcategory_id=null},handleImageUpload(o){const t=o.target.files;this.form.images=t},pageClick(){this.form.get(route("products.destroy",id))},openModal(o,t,_,y,s,a,b,f){this.modal=!0,this.operation=o,this.product_id=f,o==1?this.title="Crear":(this.title="Editar",this.form.name=t,this.form.description=_,this.form.subcategory_id=y,this.form.category_id=s,this.form.class_category_id=a,this.form.price=b)},closeModal(){this.modal=!1,this.form.reset(),this.form.name="",this.form.description="",this.form.category_id="",this.form.class_category_id="",this.form.subcategory_id=""},save(){try{this.saving=!0,console.log(this.operation),console.log(this.form.class_category_id);const o=new FormData;o.append("name",this.form.name),o.append("price",this.form.price),o.append("description",this.form.description),o.append("category_id",this.form.category_id),o.append("subcategory_id",this.form.subcategory_id),o.append("class_category_id",this.form.class_category_id);for(let t=0;t<this.form.images.length;t++)o.append("images[]",this.form.images[t]);if(this.operation==1)this.form.post(route("products.store"),{method:"post",body:o,onSuccess:()=>{this.ok("Producto guardado"),this.saving=!1}});else try{this.form.put(route("products.update",this.product_id),{onSuccess:t=>{console.log(t),this.ok("Producto actualizado")}})}catch(t){console.log(t)}}catch(o){console.log(o)}finally{this.saving=!1}},ok(o){this.form.reset(),this.closeModal(),V.fire({title:o,icon:"success"})},deleteEmployees(o){V.fire({title:"¿Seguro que desea eliminar "+this.products.name+"?",icon:"question",showCancelButton:!0,confirmButtonText:'<i class="fa-solid fa-check"></i>Si, eliminar',cancelButtonText:'<i class="fa-solid fa-ban"></i>Cancelar'}).then(t=>{console.log(t),t.isConfirmed&&this.form.delete(route("products.destroy",o,{onSuccess:()=>{this.ok("Producto eliminado")}}))})},confirmDelete(o,t){console.log(o),this.products.id=o,this.products.name=t,this.deleteEmployees(o)}},computed:{totalPages(){return Math.ceil(this.products.length/this.perPage)},filteredProduct:function(){if(this.products){const o=this.perPage*(this.currentPage-1),t=o+this.perPage;return this.products.slice(o,t)}else return[]}},components:{Head:z,MainNav:G,DangerButton:N,InputError:R,InputLabel:Z,PrimaryButton:K,TextInput:J,SelectInput:Q,WarningButton:X,SecondaryButton:Y,Modal:$,nextTick:O,ref:A,AuthenticatedLayout:L}},u=o=>(H("data-v-c3d089ec"),o=o(),q(),o),te={class:"py-12 contain-product"},oe={class:"bg-white grid v-screen place-items-center ml-24 mr-24 rounded-md"},se={class:"mt-8 mb-3 flex"},re=u(()=>e("i",{class:"fa-solid fa-plus-circle"},null,-1)),ie={class:"bg-white grid place-items-center ml-24 mr-24 pb-8"},ae={class:"table-auto border border-gray-400"},ne=u(()=>e("thead",null,[e("tr",{class:"bg-gray-100"},[e("th",{class:"px-2 py-2"},"#"),e("th",{class:"px-2 py-2"},"Producto"),e("th",{class:"px-2 py-2"},"Precio"),e("th",{class:"px-2 py-2"},"Categoria Sup."),e("th",{class:"px-2 py-2"},"Categoria"),e("th",{class:"px-2 py-2"},"SubCategoria"),e("th",{class:"px-2 py-2",colspan:"2"},"Opciones"),e("th",{class:"px-2 py-2"})])],-1)),le={key:0,class:"border border-gray-400 px-2 py-2"},ce={key:1,class:"border border-gray-400 px-2 py-2"},de={key:2,class:"border border-gray-400 px-2 py-2"},ue={class:"border border-gray-400 px-2 py-2",style:{"font-size":"0.875rem"}},me={class:"border border-gray-400 px-2 py-2"},pe={class:"border border-gray-400 px-2 py-2",style:{"font-size":"0.875rem"}},_e={class:"border border-gray-400 px-2 py-2",style:{"font-size":"0.875rem"}},ge={class:"border border-gray-400 px-2 py-2",style:{"font-size":"0.875rem"}},fe={class:"border border-gray-400 px-2 py-2"},he=u(()=>e("i",{class:"fa-solid fa-edit text-white"},null,-1)),ye={class:"border border-gray-400 px-2 py-2"},be=u(()=>e("i",{class:"fa-solid fa-trash text-white"},null,-1)),Pe={class:"pt-1 ml-auto","aria-label":"Pagination"},ve={class:"pagination mb-0"},xe=u(()=>e("li",{class:"page-item d-sm-none"},[e("span",{class:"page-link page-link-static"},"1 / 5")],-1)),Ce={class:"contain-number"},ke=["disabled"],Ie=u(()=>e("i",{class:"fa-solid fa-angle-left",style:{color:"#17696a"}},null,-1)),Se=[Ie],we=["onClick"],Ve={class:"page-link"},Be=["disabled"],Te=u(()=>e("i",{class:"fa-solid fa-angle-right",style:{color:"#17696a"}},null,-1)),Me=[Te],De={class:"p-3 text-lg font-medium text-gray-900"},Ue={class:"p-3"},Ee={class:"p-3"},Le={class:"p-3"},Ne={key:0,class:"p-3"},je={class:"p-3"},ze={class:"p-3"},Oe={class:"p-3"},Ae={class:"p-3"},Fe={key:0},We={key:1},He=u(()=>e("i",{class:"fas fa-spinner fa-spin"},null,-1)),qe={class:"p-3 mt-2 flex justify-end"};function Ge(o,t,_,y,s,a){const b=n("Head"),f=n("PrimaryButton"),B=n("WarningButton"),T=n("DangerButton"),m=n("InputLabel"),k=n("TextInput"),g=n("InputError"),P=n("SelectInput"),M=n("SecondaryButton"),D=n("Modal"),U=n("AuthenticatedLayout");return l(),c(x,null,[i(b,{title:"Productos"}),i(U,null,{default:p(()=>[e("div",te,[e("div",oe,[e("div",se,[i(f,{onClick:t[0]||(t[0]=r=>a.openModal(1))},{default:p(()=>[re,v(" Agregar ")]),_:1})])]),e("div",ie,[e("table",ae,[ne,e("tbody",null,[(l(!0),c(x,null,S(a.filteredProduct,(r,h)=>(l(),c("tr",{key:r.id},[s.currentPage===1?(l(),c("td",le,d(h+1),1)):s.currentPage===2?(l(),c("td",ce,d(8+h+1),1)):s.currentPage===3?(l(),c("td",de,d(16+h+1),1)):w("",!0),e("td",ue,d(r.name),1),e("td",me,d(r.price.toFixed(2)),1),e("td",pe,d(r.class_category),1),e("td",_e,d(r.category),1),e("td",ge,d(r.subcategory),1),e("td",fe,[i(B,{onClick:E=>a.openModal(2,r.name,r.description,r.subcategory_id,r.category_id,r.class_category_id,r.price,r.id)},{default:p(()=>[he]),_:2},1032,["onClick"])]),e("td",ye,[i(T,{onClick:E=>a.confirmDelete(r.id,r.name)},{default:p(()=>[be]),_:2},1032,["onClick"])])]))),128))])]),e("nav",Pe,[e("ul",ve,[xe,e("div",Ce,[e("button",{class:C(["button-left",[s.currentPage===1?"disabled-button":""]]),onClick:t[1]||(t[1]=(...r)=>a.prevPage&&a.prevPage(...r)),disabled:s.currentPage===1},Se,10,ke),(l(!0),c(x,null,S(a.totalPages,r=>(l(),c("li",{class:C(["page-item d-none d-sm-block number-page",{"active-div":r===s.currentPage}]),style:{cursor:"pointer"},"aria-current":"page",onClick:h=>a.goToPageNumber(r),key:r},[e("span",Ve,d(r),1)],10,we))),128)),e("button",{class:C(["button-rigth",[s.number_pages===s.currentPage?"disabled-button":""]]),onClick:t[2]||(t[2]=(...r)=>a.nextPage&&a.nextPage(...r)),disabled:s.number_pages===s.currentPage},Me,10,Be)])])])]),i(D,{show:s.modal,onClose:a.closeModal},{default:p(()=>[e("h2",De,d(s.title),1),e("div",Ue,[i(m,{for:"name",value:"Nombre del Producto: "}),i(k,{id:"name",ref:"nameInput",modelValue:s.form.name,"onUpdate:modelValue":t[3]||(t[3]=r=>s.form.name=r),type:"text",class:"mt-1 block w-3/4",placeholder:"Nombre del Producto",autocomplete:"off"},null,8,["modelValue"]),i(g,{message:s.form.errors.name,class:"mt-2"},null,8,["message"])]),e("div",Ee,[i(m,{for:"description",value:"Descripción del Producto: "}),F(e("textarea",{id:"description",ref:"descriptonInput","onUpdate:modelValue":t[4]||(t[4]=r=>s.form.description=r),placeholder:"Descripción del Producto",class:"mt-1 block w-3/4 rounded-md shadow-sm border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 placeholder:text-gray-300"},`

                    `,512),[[W,s.form.description]]),i(g,{message:s.form.errors.description,class:"mt-2"},null,8,["message"])]),e("div",Le,[i(m,{for:"price",value:"Precio: "}),i(k,{id:"price",ref:"priceInput",modelValue:s.form.price,"onUpdate:modelValue":t[5]||(t[5]=r=>s.form.price=r),type:"number",class:"mt-1 block w-3/4",placeholder:"Precio"},null,8,["modelValue"]),i(g,{message:s.form.errors.price,class:"mt-2"},null,8,["message"])]),s.operation===1?(l(),c("div",Ne,[i(m,{for:"image",value:"Imagen:"}),e("input",{type:"file",id:"image",accept:"image/*",ref:"imageInput",onChange:t[6]||(t[6]=(...r)=>a.handleImageUpload&&a.handleImageUpload(...r)),class:"mt-1 block w-3/4",multiple:""},null,544)])):w("",!0),e("div",je,[i(m,{for:"class_category_id",value:"Categoria Superior: "}),i(P,{options:_.class_categories,id:"class_category_id",modelValue:s.form.class_category_id,"onUpdate:modelValue":t[7]||(t[7]=r=>s.form.class_category_id=r),onChange:a.filterCategories,class:"mt-1 block w-3/4",placeholder:"Categoria Superior"},null,8,["options","modelValue","onChange"]),i(g,{message:s.form.errors.class_category_id,class:"mt-2"},null,8,["message"])]),e("div",ze,[i(m,{for:"category_id",value:"Categoria: "}),i(P,{options:s.operation==1?s.filteredCat:_.categories,id:"category_id",modelValue:s.form.category_id,"onUpdate:modelValue":t[8]||(t[8]=r=>s.form.category_id=r),onChange:a.filterSubcategories,class:"mt-1 block w-3/4",placeholder:"Categoria"},null,8,["options","modelValue","onChange"]),i(g,{message:s.form.errors.category_id,class:"mt-2"},null,8,["message"])]),e("div",Oe,[i(m,{for:"subcategory_id",value:"Subcategoria: "}),i(P,{options:s.operation==1?s.filteredSubCat:_.subcategories,id:"subcategory_id",modelValue:s.form.subcategory_id,"onUpdate:modelValue":t[9]||(t[9]=r=>s.form.subcategory_id=r),class:"mt-1 block w-3/4",placeholder:"Subcategoria"},null,8,["options","modelValue"])]),e("div",Ae,[i(f,{disabled:s.saving,onClick:a.save,class:"btn-add"},{default:p(()=>[s.form.processing?(l(),c("span",We,[He,v(" Guardando...")])):(l(),c("span",Fe,"Guardar"))]),_:1},8,["disabled","onClick"])]),e("div",qe,[i(M,{class:"ml-3",disabled:s.form.processing,onClick:a.closeModal},{default:p(()=>[v(" Cancel ")]),_:1},8,["disabled","onClick"])])]),_:1},8,["show","onClose"])])]),_:1})],64)}const at=j(ee,[["render",Ge],["__scopeId","data-v-c3d089ec"]]);export{at as default};
